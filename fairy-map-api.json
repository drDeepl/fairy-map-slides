{"openapi":"3.0.0","paths":{"/api/auth/signup":{"post":{"operationId":"AuthController_signUp","summary":"регистрация","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpRequestDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponseDto"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationExceptionResponseDto"}}}},"401":{"description":"Unauthorized"}},"tags":["AuthController"]}},"/api/auth/signin":{"post":{"operationId":"AuthController_signIn","summary":"вход","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequestDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponseDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AuthController"],"security":[{"bearer":[]}]}},"/api/auth/refresh":{"post":{"operationId":"AuthController_refresh","summary":"обновление access token","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer refreshToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponseDto"}}}},"400":{"description":""},"401":{"description":""}},"tags":["AuthController"]}},"/api/auth/logout":{"post":{"operationId":"AuthController_logout","summary":"выход из системы","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseRequestExceptionDto"}}}}},"tags":["AuthController"],"security":[{"bearer":[]}]}},"/api/user/me":{"get":{"operationId":"UserController_getCurrentUserInfo","summary":"получение информации о текущем пользователе","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":""},"401":{"description":""},"404":{"description":""}},"tags":["UserController"]}},"/api/user/audio/approved/my":{"get":{"operationId":"UserController_getApprovedUserAudiosCurrentUser","summary":"получение одобренных озвучек текущего пользователя","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AudioStoryResponseDto"}}}}},"400":{"description":"Bad Request"}},"tags":["UserController"]}},"/api/user/{userId}":{"get":{"operationId":"UserController_findUserById","summary":"получение информации о пользователе по его id","description":"необходима роль администратора","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":""},"401":{"description":""},"404":{"description":""}},"tags":["UserController"]}},"/api/user/story/{storyId}/language/{languageId}/audio/upload":{"post":{"operationId":"UserController_uploadUserAudio","summary":"загрузка озвучки пользователя","description":"файл прикрепляется к полю audio","parameters":[{"name":"languageId","required":true,"in":"path","schema":{"type":"number"}},{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAudioResponseDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["UserController"]}},"/api/user/story/audio/request/my":{"get":{"operationId":"UserController_getAllAudioStoryRequestsCurrentUser","summary":"получение всех заявок на озвучки текущего пользователя","parameters":[{"name":"page","required":false,"in":"query","description":"номер страницы","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"число элементов на странице","schema":{"minimum":1,"maximum":15,"default":10,"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Успешное получение данных","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageResponseDto"},{"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/AudioApplicationWithUserAudioResponseDto"}}}}]}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["UserController"]}},"/api/story/all":{"get":{"operationId":"StoryController_getAllStories","summary":"получение всех сказок","parameters":[{"name":"page","required":false,"in":"query","description":"номер страницы","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"число элементов на странице","schema":{"minimum":1,"maximum":15,"default":10,"type":"number"}}],"responses":{"200":{"description":"Успешное получение данных","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageResponseDto"},{"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/StoryBookResponseDto"}}}}]}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/search":{"get":{"operationId":"StoryController_searchStoryByName","summary":"поиск сказки по имени","description":"для работы с websockets используется событие searchStoryByName для отправления запроса и searchResultStoryByName для получения результатов","parameters":[{"name":"name","required":false,"in":"query","description":"название сказки","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"номер страницы","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"число элементов на странице","schema":{"minimum":1,"maximum":15,"default":10,"type":"number"}}],"responses":{"200":{"description":"Успешное получение данных","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageResponseDto"},{"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/StoryBookResponseDto"}}}}]}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/ethnic-group/{ethnicGroupId}":{"get":{"operationId":"StoryController_getStoriesByEthnicGroupId","summary":"получение всех сказок выбранной этнической группы","parameters":[{"name":"ethnicGroupId","required":true,"in":"path","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","description":"номер страницы","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"число элементов на странице","schema":{"minimum":1,"maximum":15,"default":10,"type":"number"}}],"responses":{"200":{"description":"Успешное получение данных","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageResponseDto"},{"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/StoryBookResponseDto"}}}}]}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/ethnic-group/books/{ethnicGroupId}":{"get":{"operationId":"StoryController_getStoriesWithAudiosByEthnicGroupId","summary":"получение всех сказок выбранной этнической группы и озвучек для них","parameters":[{"name":"ethnicGroupId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StoryBookWithAudiosResponseDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/audio/user/{userId}":{"get":{"operationId":"StoryController_getStoriesByAuthorAudioStory","summary":"получение сказок, которые озвучил пользователь","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StoryBookResponseDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/by-name/{name}":{"get":{"operationId":"StoryController_getStoryByName","summary":"получение сказок в которых есть подстрока name","parameters":[{"name":"name","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StoryDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/{storyId}":{"get":{"operationId":"StoryController_getStoryById","summary":"получение общей информации о выбранной сказке","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/{storyId}/audio/all":{"get":{"operationId":"StoryController_getAudiosByStoryId","summary":"получение одобренных озвучек для выбранной сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AudioStoryResponseDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/text/{storyId}":{"get":{"operationId":"StoryController_getTextStoryByStoryId","summary":"получение текста сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TextStoryDto"}}}},"400":{"description":"Bad Request"}},"tags":["StoryController"]}},"/api/story/audio/{storyAudioId}":{"get":{"operationId":"StoryController_getAudioStoryById","summary":"получение одобренной озвучки по audioId","description":"возвращает StreamableFile","parameters":[{"name":"storyAudioId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamableFile"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/audio/ethnic-group/{ethnicGroupId}":{"get":{"operationId":"StoryController_getAudioStoryByEthnicGroup","summary":"получение аудиокниг для выбранной этнической группы","parameters":[{"name":"ethnicGroupId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PreviewAudioStoryResponseDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/{storyId}/image/{filename}":{"get":{"operationId":"StoryController_getImgStoryById","summary":"получение обложки для сказки по storyId","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"string"}},{"name":"filename","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageStoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"404":{"description":"Image not found"}},"tags":["StoryController"]}},"/api/story/rating/{audioId}":{"get":{"operationId":"StoryController_getRatingByAudioId","summary":"получение оценки для выбранной озвучки","parameters":[{"name":"audioId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingAudioStoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/rating/my/{userAudioId}":{"get":{"operationId":"StoryController_getRatingByAudioIdForCurrentUser","summary":"получение оценки для выбранной озвучки для текущего пользователя","parameters":[{"name":"userAudioId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RatingAudioStoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/story/rating/add":{"post":{"operationId":"StoryController_addRatingForStoryByCurrentUser","summary":"добавление текущим пользователем оценки к озвучке по audioId","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRatingAudioStoryDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddedRatingAudioStoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["StoryController"]}},"/api/audio-story-request/all":{"get":{"operationId":"AudioStoryRequestController_getAllAudioStoryRequests","summary":"получение всех заявок на озвучки","description":"необходимы роль модератора","parameters":[{"name":"page","required":false,"in":"query","description":"номер страницы","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"число элементов на странице","schema":{"minimum":1,"maximum":15,"default":10,"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Успешное получение данных","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageResponseDto"},{"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/AudioApplicationWithUserAudioResponseDto"}}}}]}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AudioStoryRequestController"]}},"/api/audio-story-request/by-user/{userId}":{"get":{"operationId":"AudioStoryRequestController_getAllAudioStoryReqeustsByUserId","summary":"получение всех заявок на озвучки для выбранного пользователя.","description":"Необходима роль модератора","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","description":"номер страницы","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"take","required":false,"in":"query","description":"число элементов на странице","schema":{"minimum":1,"maximum":15,"default":10,"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Успешное получение данных","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageResponseDto"},{"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/AudioApplicationWithUserAudioResponseDto"}}}}]}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AudioStoryRequestController"]}},"/api/audio-story-request/add":{"post":{"operationId":"AudioStoryRequestController_createAddAudioRequest","summary":"Создание заявки на проверку озвучки","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddAudioStoryApplicationDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioStoryRequestEntity"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AudioStoryRequestController"]}},"/api/audio-story-request/edit/{audioStoryReqeustId}":{"put":{"operationId":"AudioStoryRequestController_editAudioStoryRequest","summary":"редактирование заявки на проверку озвучки","description":"необходима роль модератора или администратора. после редактирования, отредактированная запись по вебсокету отправляется пользователю из userId(создавшему заявку) в событие с названием \"statuses\"","parameters":[{"name":"audioStoryReqeustId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditAudioStoryApplicaitonDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioApplicationWithUserAudioResponseDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AudioStoryRequestController"]}},"/api/audio-story-request/delete/{audioStoryRequestId}":{"delete":{"operationId":"AudioStoryRequestController_deleteAudioStoryRequestBydId","summary":"удаление заявки на проверку озвучки","description":"необходима роль администратора","parameters":[{"name":"audioStoryRequestId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AudioStoryRequestController"]}},"/api/constituent/add":{"post":{"operationId":"ConstituentsController_addConstituent","summary":"добавление субъекта РФ","description":"необходима роль администратора","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddConstituentDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConstituentDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["ConstituentController"]}},"/api/constituent/add/ethnic-group":{"post":{"operationId":"ConstituentsController_addEthnicGroupToConstituent","summary":"добавление этнической группы к субъекту рф","description":"небходима роль администратора","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddEthnicGroupToConstituentDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupToConstituentDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["ConstituentController"]}},"/api/constituent/ethnic-group/delete":{"delete":{"operationId":"ConstituentsController_deleteEthnicGroupFromConstituent","summary":"удаление этнической группы у субъекта рф","description":"необходима роль администратора","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteEthnicGroupToConstituentDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupToConstituentDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["ConstituentController"]}},"/api/constituent/ethnic-group/{constituentId}":{"get":{"operationId":"ConstituentsController_getEthnicGroupByConstituentId","summary":"получение этнической группы, принадлежащей субъекту рф","parameters":[{"name":"constituentId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EthnicGroupToConstituentDto"}}}}},"400":{"description":"Bad Request"}},"tags":["ConstituentController"]}},"/api/constituent/all":{"get":{"operationId":"ConstituentsController_getConstituents","summary":"получение всех субъектов","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConstituentDto"}}}}},"400":{"description":"Bad Request"}},"tags":["ConstituentController"]}},"/api/constituent/edit/{id}":{"put":{"operationId":"ConstituentsController_editConstituent","summary":"редактирование субъекта","description":"небходима роль администратора","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditConstituentDto"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["ConstituentController"]}},"/api/constituent/{id}":{"delete":{"operationId":"ConstituentsController_deleteConstituentById","summary":"удаление данных субъекта","description":"необходима роль администратора","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["ConstituentController"]}},"/api/ethnic-group/add":{"post":{"operationId":"EthnicGroupController_addEthnicGroup","summary":"добавление этнической группы","description":"необходима роль администратора","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddEthnicGroupDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/all":{"get":{"operationId":"EthnicGroupController_ethnicGroups","summary":"получение списка этнических групп","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EthnicGroupLanguageDto"}}}}},"400":{"description":"Bad Request"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/{ethnicGroupId}":{"get":{"operationId":"EthnicGroupController_getEthnicGroupById","summary":"получение этнической группы по ethnicGroupId","parameters":[{"name":"ethnicGroupId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupDto"}}}},"400":{"description":"Bad Request"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/edit/{id}":{"put":{"operationId":"EthnicGroupController_editEthnicGroup","summary":"редактирование этнической группы","description":"необходима роль администратора","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditEthnicGroupDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/{id}":{"delete":{"operationId":"EthnicGroupController_deleteEthnicGroup","summary":"удаление этнической группы","description":"необходима роль администратора","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/language/add":{"post":{"operationId":"EthnicGroupController_addLanguage","summary":"добавление языка этнической группы","description":"необходима роль администратора","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddLanguageDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/language/all":{"get":{"operationId":"EthnicGroupController_getAllLanguage","summary":"получение списка всех языков","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LanguageDto"}}}}},"400":{"description":"Bad Request"},"403":{"description":"Forbidden"}},"tags":["EthnicGroupController"]}},"/api/ethnic-group/language/{id}":{"delete":{"operationId":"EthnicGroupController_deleteLanguageById","summary":"удаление языка по id","description":"необходима роль администратора","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"}},"tags":["EthnicGroupController"]}},"/api/map":{"get":{"operationId":"MapController_getMapTopojson","summary":"получить данные для отрисовки карты","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MapDto"}}}},"400":{"description":"Bad Request"}},"tags":["MapController"]}},"/api/map/ethnic-groups":{"get":{"operationId":"MapController_getEthnicalGroupPoints","summary":"получение точек этнических групп на карте","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EthnicGroupMapWithGroupDto"}}}}},"400":{"description":"Bad Request"}},"tags":["MapController"]}},"/api/map/ethnic-groups/{constituentId}":{"get":{"operationId":"MapController_getEthnicalGroupPointsByConstituentId","summary":"получение точек этнических групп по номеру региона","parameters":[{"name":"constituentId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EthnicGroupMapPointEntity"}}}}},"400":{"description":"Bad Request"}},"tags":["MapController"]}},"/api/map/ethnic-groups/{name}":{"get":{"operationId":"MapController_getEthnicGroupPointsByName","summary":"получение точек этнических групп по названию этнической группы","parameters":[{"name":"name","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EthnicGroupMapPointEntityWithConstituents"}}}}}},"tags":["MapController"]}},"/api/map/ethnic-groups/{pointId}":{"delete":{"operationId":"MapController_deleteEthnicalGroupPoint","summary":"удаление точки этнической группы","description":"необходима роль администратора","parameters":[{"name":"pointId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupMapDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["MapController"]}},"/api/map/constituents/filled":{"get":{"operationId":"MapController_getPercentsFilledStoriesByConstituentId","summary":"получение списка субъектов и их заполненности озвучками","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConstituentFilledDto"}}}}},"400":{"description":"Bad Request"}},"tags":["MapController"]}},"/api/request/status":{"get":{"operationId":"RequestController_getStatuses","summary":"получение существующих статусов для заявок","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["RequestController"]}},"/api/request/type":{"get":{"operationId":"RequestController_getTypes","summary":"получение существующих типов заявок","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["RequestController"]}},"/api/add-story-request/all":{"get":{"operationId":"AddStoryRequestController_getAddStoryRequestAll","summary":"получение всех заявок на добавление сказки","description":"необходима роль администратора. пример запроса: /api/add-story-request/all?start=1&count=10","parameters":[{"name":"start","required":true,"in":"query","description":"номер первого элемента","schema":{"type":"number"}},{"name":"count","required":true,"in":"query","description":"количество элементов","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AddStoryRequestEntity"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AddStoryRequestController"]}},"/api/add-story-request/my-requests":{"get":{"operationId":"AddStoryRequestController_getAddStoryRequestForCurrentUser","summary":"получение всех заявок на добавление сказки от текущего пользователя","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AddStoryRequestDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AddStoryRequestController"]}},"/api/add-story-request/by-user/{userId}":{"get":{"operationId":"AddStoryRequestController_getAddStoryRequestByUserId","summary":"получение всех заявок на добавление сказки для выбранного пользователя","description":"необходима роль администратора.","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AddStoryRequestDto"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AddStoryRequestController"]}},"/api/add-story-request/create":{"post":{"operationId":"AddStoryRequestController_createAddStoryRequestForCurrentUser","summary":"создание заявки на добавление сказки","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAddStoryRequestDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddStoryRequestDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AddStoryRequestController"]}},"/api/add-story-request/edit/{addStoryRequestId}":{"put":{"operationId":"AddStoryRequestController_editStatusAddStoryReqeust","summary":"обновление заявки","description":"необходима роль администратора. статус заявки берется из /api/request/status/all | Необходима роль moder | После успешного редактирования данные заявки так же передаются пользователю с userId по веб-сокету","parameters":[{"name":"addStoryRequestId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditAddStoryRequestDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddStoryRequestEntity"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AddStoryRequestController"]}},"/api/add-story-request/delete/{addStoryRequestId}":{"delete":{"operationId":"AddStoryRequestController_deleteAddStoryRequestById","summary":"удаление заявки","description":"Необходима роль администратора","parameters":[{"name":"addStoryRequestId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AddStoryRequestController"]}},"/api/admin/ethnic-groups/{ethnicGroupId}/constituents/{constituentId}":{"post":{"operationId":"AdminController_addEthnicalGroupPoint","summary":"добавление точки этнической группы на карту","description":"необходима роль администратора","parameters":[{"name":"ethnicGroupId","required":true,"in":"path","schema":{"type":"number"}},{"name":"constituentId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddEthnicGroupMapDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupMapDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/ethnic-groups/{pointId}":{"delete":{"operationId":"AdminController_deleteEthnicalGroupPoint","summary":"удаление точки этнической группы","description":"необходима роль администратора","parameters":[{"name":"pointId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EthnicGroupMapDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/add":{"post":{"operationId":"AdminController_addStory","summary":"добавление сказки","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddStoryDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryWithTextDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/edit/{storyId}":{"put":{"operationId":"AdminController_editSotry","summary":"редактирование сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditStoryDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/delete/{storyId}":{"delete":{"operationId":"AdminController_deleteStoryById","summary":"удаление сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/text/add/{storyId}":{"post":{"operationId":"AdminController_addTextStory","summary":"добавление текста сказки","parameters":[{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddTextStoryDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TextStoryDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/{storyId}/audio":{"post":{"operationId":"AdminController_setUserAudioToStory","summary":"добавление озвучки к сказке","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddAudioStoryDto"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/{storyId}/language/{languageId}/audio/upload":{"post":{"operationId":"AdminController_uploadAudioStory","summary":"загрузка озвучки для сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"languageId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioStoryResponseDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/{storyId}/image/upload":{"post":{"operationId":"AdminController_uploadStoryImage","summary":"загрузка обложки для выбранной сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryBookResponseDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/story/{storyId}/image":{"delete":{"operationId":"AdminController_deleteStoryImgByStoryId","summary":"удаление обложки для выбранной сказки","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/audio//delete/{userAudioId}":{"delete":{"operationId":"AdminController_deleteUserAudioById","summary":"удаление озвучки пользователя","description":"необходима роль администратора","parameters":[{"name":"userAudioId","required":true,"in":"path","schema":{"type":"number"}},{"name":"authorization","in":"header","description":"Пример: Bearer accessToken","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BaseUserAudioDto"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"}},"tags":["AdminController"]}},"/api/admin/user/delete/{userId}":{"delete":{"operationId":"AdminController_deleteUser","summary":"удаление пользователя по его id","description":"необходима роль администратора","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":""},"401":{"description":""},"404":{"description":""}},"tags":["AdminController"]}}},"info":{"title":"REST API приложения для интерактивной карты сказок различных народов России","description":"API Проект представляет собой интерфейс для управления данными для интерактивной карты, на котором размещена карта России. Пользователь может выбрать регион, а затем этническую группу и язык, чтобы прослушать сказку, соответствующую этой группе.","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"http://localhost:3000"}],"components":{"securitySchemes":{"JWT-Auth":{"scheme":"bearer","bearerFormat":"bearer","type":"http","in":"header"}},"schemas":{"SignUpRequestDto":{"type":"object","properties":{"email":{"type":"string","description":"","nullable":false},"password":{"type":"string","description":"","nullable":false},"firstName":{"type":"string","description":"","nullable":false},"lastName":{"type":"string","description":"","nullable":false}},"required":["email","password","firstName","lastName"]},"TokensResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"access token","nullable":false}},"required":["accessToken"]},"ValidationExceptionResponseDto":{"type":"object","properties":{"statusCode":{"type":"number","description":"статус код","nullable":false},"message":{"type":"string","description":"описание ошибки","nullable":false},"validationErrors":{"type":"object","description":"объекто с полями и массивом ошибок их","nullable":false,"example":{"propertyName":["message1","message2"]}}},"required":["statusCode","message","validationErrors"]},"SignInRequestDto":{"type":"object","properties":{"email":{"type":"string","description":"","nullable":false},"password":{"type":"string","description":"","nullable":false}},"required":["email","password"]},"BadRequestDto":{"type":"object","properties":{"statusCode":{"type":"number","description":"","nullable":false},"message":{"description":"","nullable":false,"type":"array","items":{"type":"string"}},"error":{"type":"string","description":"","nullable":false}},"required":["statusCode","message","error"]},"BaseRequestExceptionDto":{"type":"object","properties":{"statusCode":{"type":"number","description":"","nullable":false}},"required":["statusCode"]},"UserResponseDto":{"type":"object","properties":{"firstName":{"type":"string","description":"","nullable":false},"lastName":{"type":"string","description":"","nullable":false},"email":{"type":"string","description":"","nullable":false},"role":{"type":"string","description":"","nullable":false},"id":{"type":"number","description":"","nullable":false}},"required":["firstName","lastName","email","role","id"]},"LanguageDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"id":{"type":"number","description":"","nullable":false}},"required":["name","id"]},"AuthorAudioStoryResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"id пользователя","nullable":false},"firstName":{"type":"string","description":"имя пользователя","nullable":false},"lastName":{"type":"string","description":"фамилия пользователя","nullable":false}},"required":["id","firstName","lastName"]},"AudioStoryResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"id озвучки"},"storyId":{"type":"number","description":"id сказки"},"language":{"description":"язык озвучки","allOf":[{"$ref":"#/components/schemas/LanguageDto"}]},"srcAudio":{"type":"string","description":"ссылка на файл с озвучкой"},"author":{"description":"автор озвучки","allOf":[{"$ref":"#/components/schemas/AuthorAudioStoryResponseDto"}]},"commonRating":{"type":"number","description":"рейтинг озвучки"}},"required":["id","storyId","language","srcAudio","author","commonRating"]},"UserAudioResponseDto":{"type":"object","properties":{"userAudioId":{"type":"number","description":"userAudioId","nullable":false},"srcAudio":{"type":"string","description":"url для прослушивания файла","nullable":false},"language":{"description":"информация о языке озвучки","nullable":false,"allOf":[{"$ref":"#/components/schemas/LanguageDto"}]},"originalName":{"type":"string","description":"изначальное название озвучки"}},"required":["userAudioId","srcAudio","language","originalName"]},"PageMetaDto":{"type":"object","properties":{"page":{"type":"number","description":"номер текущей страницы"},"take":{"type":"number","description":"количество элементов на странице"},"itemCount":{"type":"number","description":"количество элементов всего"},"pageCount":{"type":"number","description":"количество страниц"},"hasPreviousPage":{"type":"boolean","description":"есть предыдущая страница"},"hasNextPage":{"type":"boolean","description":"есть следующая страница"}},"required":["page","take","itemCount","pageCount","hasPreviousPage","hasNextPage"]},"PageResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"type":"array"}},"meta":{"description":"информация о странице","allOf":[{"$ref":"#/components/schemas/PageMetaDto"}]}},"required":["data","meta"]},"UserAudioWithLanguageResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"ид озвучки"},"name":{"type":"string","description":"название файла"},"originalName":{"type":"string","description":"пользовательское название озвучки"},"srcAudio":{"type":"string","description":"прямая ссылка на файл"},"language":{"description":"информация о языке","allOf":[{"$ref":"#/components/schemas/LanguageDto"}]}},"required":["id","name","originalName","srcAudio","language"]},"AudioApplicationWithUserAudioResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"ид заявки","nullable":false},"userAudio":{"description":"данные о озвучки пользователя","nullable":false,"allOf":[{"$ref":"#/components/schemas/UserAudioWithLanguageResponseDto"}]},"user":{"description":"информация о пользователе","nullable":false,"allOf":[{"$ref":"#/components/schemas/AuthorAudioStoryResponseDto"}]},"status":{"type":"string","description":"статус заявки","nullable":false},"comment":{"type":"string","description":"комментарий, проверяющего","nullable":false},"createdAt":{"format":"date-time","type":"string","description":"дата создания заявки","nullable":false},"updatedAt":{"format":"date-time","type":"string","description":"дата редактирования заявки","nullable":false},"storyId":{"type":"number","description":"ид сказки"},"storyName":{"type":"string","description":"название сказки","nullable":false}},"required":["id","userAudio","user","status","comment","createdAt","updatedAt","storyId","storyName"]},"EthnicGroupDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"languageId":{"type":"number","description":"","nullable":false},"id":{"type":"number","description":"","nullable":false}},"required":["name","languageId","id"]},"StoryBookResponseDto":{"type":"object","properties":{"name":{"type":"string","description":"название истории","nullable":false},"id":{"type":"number","description":"id сказки","nullable":false},"ethnicGroup":{"description":"id этнической группы","nullable":false,"allOf":[{"$ref":"#/components/schemas/EthnicGroupDto"}]},"srcImg":{"type":"string","description":"url для получения обложки сказки","nullable":true},"text":{"type":"string","description":"текст сказки","nullable":true}},"required":["name","id","ethnicGroup","srcImg","text"]},"StoryBookWithAudiosResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"id сказки","nullable":false},"name":{"type":"string","description":"название истории","nullable":false},"ethnicGroup":{"description":"id этнической группы","nullable":false,"allOf":[{"$ref":"#/components/schemas/EthnicGroupDto"}]},"srcImg":{"type":"string","description":"url для получения обложки сказки","nullable":true},"text":{"type":"string","description":"текст сказки","nullable":true},"audios":{"description":"одобренные озвучки для сказки","type":"array","items":{"$ref":"#/components/schemas/AudioStoryResponseDto"}}},"required":["id","name","ethnicGroup","srcImg","text","audios"]},"StoryDto":{"type":"object","properties":{"name":{"type":"string","description":"название истории","nullable":false},"id":{"type":"number","description":"id сказки","nullable":false},"ethnicGroup":{"description":"id этнической группы","nullable":false,"allOf":[{"$ref":"#/components/schemas/EthnicGroupDto"}]}},"required":["name","id","ethnicGroup"]},"TextStoryDto":{"type":"object","properties":{"text":{"type":"string","description":"","nullable":false},"id":{"type":"number","description":"","nullable":false}},"required":["text","id"]},"StreamableFile":{"type":"object","properties":{}},"AudioResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"id озвучки"},"language":{"description":"язык озвучки","allOf":[{"$ref":"#/components/schemas/LanguageDto"}]},"srcAudio":{"type":"string","description":"ссылка на файл с озвучкой"},"author":{"description":"автор озвучки","allOf":[{"$ref":"#/components/schemas/AuthorAudioStoryResponseDto"}]},"commonRating":{"type":"number","description":"рейтинг озвучки"}},"required":["id","language","srcAudio","author","commonRating"]},"PreviewAudioStoryResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"id истории"},"name":{"type":"string","description":"название истории"},"srcImg":{"type":"string","description":"url обложки"},"audios":{"description":"массив с озвучками","type":"array","items":{"$ref":"#/components/schemas/AudioResponseDto"}}},"required":["id","name","srcImg","audios"]},"Buffer":{"type":"object","properties":{}},"ImageStoryDto":{"type":"object","properties":{"filename":{"type":"string","description":"","nullable":false},"buffer":{"description":"","nullable":false,"allOf":[{"$ref":"#/components/schemas/Buffer"}]}},"required":["filename","buffer"]},"RatingAudioStoryDto":{"type":"object","properties":{"audioId":{"type":"number","description":"номер озвучки","nullable":false},"ratingAudio":{"type":"number","description":"среднее значение озвучки","nullable":false}},"required":["audioId","ratingAudio"]},"AddRatingAudioStoryDto":{"type":"object","properties":{"rating":{"type":"number","description":"оценка","nullable":false},"audioId":{"type":"number","description":"id озвучки"}},"required":["rating","audioId"]},"AddedRatingAudioStoryDto":{"type":"object","properties":{"audioId":{"type":"number","description":"ид озвучки"},"ratingCurrentUser":{"type":"number","description":"оценка текущего пользователя"},"ratingAudioStory":{"type":"number","description":"общая оценка озвучки"}},"required":["audioId","ratingCurrentUser","ratingAudioStory"]},"AddAudioStoryApplicationDto":{"type":"object","properties":{"userAudioId":{"type":"number","description":"","nullable":false},"userId":{"type":"number","description":"ид пользователя, создавшего заявку","nullable":false},"storyId":{"type":"number","description":"","nullable":false}},"required":["userAudioId","userId","storyId"]},"AudioStoryRequestEntity":{"type":"object","properties":{"id":{"type":"number"},"userId":{"type":"number"},"userAudioId":{"type":"number"},"status":{"type":"string"},"typeRequest":{"type":"string"},"storyId":{"type":"number"},"comment":{"type":"string"}},"required":["id","userId","userAudioId","status","typeRequest","storyId","comment"]},"EditAudioStoryApplicaitonDto":{"type":"object","properties":{"comment":{"type":"string","description":"","nullable":false},"status":{"type":"string","description":"","nullable":false}},"required":["comment","status"]},"AddConstituentDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false}},"required":["name"]},"ConstituentDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"id":{"type":"number","description":"","nullable":false}},"required":["name","id"]},"AddEthnicGroupToConstituentDto":{"type":"object","properties":{"constituentRfId":{"type":"number","description":"","nullable":false},"ethnicGroupId":{"type":"number","description":"","nullable":false}},"required":["constituentRfId","ethnicGroupId"]},"EthnicGroupToConstituentDto":{"type":"object","properties":{"constituentRfId":{"type":"number","description":"","nullable":false},"ethnicGroupId":{"type":"number","description":"","nullable":false},"id":{"type":"number","description":"","nullable":false}},"required":["constituentRfId","ethnicGroupId","id"]},"DeleteEthnicGroupToConstituentDto":{"type":"object","properties":{"constituentRfId":{"type":"number","description":"","nullable":false},"ethnicGroupId":{"type":"number","description":"","nullable":false}},"required":["constituentRfId","ethnicGroupId"]},"EditConstituentDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"languageId":{"type":"number","description":"","nullable":false}},"required":["name","languageId"]},"AddEthnicGroupDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"languageId":{"type":"number","description":"","nullable":false}},"required":["name","languageId"]},"EthnicGroupLanguageDto":{"type":"object","properties":{"id":{"type":"number","description":"","nullable":false},"name":{"type":"string","description":"","nullable":false},"language":{"description":"","nullable":false,"allOf":[{"$ref":"#/components/schemas/LanguageDto"}]}},"required":["id","name","language"]},"EditEthnicGroupDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"languageId":{"type":"number","description":"","nullable":false}},"required":["name","languageId"]},"AddLanguageDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false}},"required":["name"]},"TransformDto":{"type":"object","properties":{"scale":{"example":[0.322,0.943],"type":"array","items":{"type":"array"}},"translate":{"example":[0.322,0.943],"type":"array","items":{"type":"array"}}},"required":["scale","translate"]},"EthnicGroupPointDto":{"type":"object","properties":{"idPoint":{"type":"number","description":"Уникальный идентификатор точки"},"ethnicGroupId":{"type":"number","description":"Идентификатор этнической группы"},"ethnicGroupName":{"type":"string","description":"Название этнической группы"},"latitude":{"type":"number","description":"Широта точки"},"longitude":{"type":"number","description":"Долгота точки"}},"required":["idPoint","ethnicGroupId","ethnicGroupName","latitude","longitude"]},"FeatureGeometryPropertiesDto":{"type":"object","properties":{"id":{"type":"string","description":"id"},"name":{"type":"string","description":"feature topojson"},"shapeGroup":{"type":"string","description":"Shape group"},"shapeID":{"type":"string","description":"Shape ID"},"shapeISO":{"type":"string","description":"Shape ISO"},"shapeType":{"type":"string","description":"Shape type"},"ethnicGroupsPoints":{"description":"Точки с этническими группами","type":"array","items":{"$ref":"#/components/schemas/EthnicGroupPointDto"}}},"required":["id","name","shapeGroup","shapeID","shapeISO","shapeType","ethnicGroupsPoints"]},"GeometryPropertiesDto":{"type":"object","properties":{"arcs":{"description":"массив с дугам","example":[[398223,46698]],"type":"array","items":{"type":"array"}},"type":{"type":"string"},"properties":{"$ref":"#/components/schemas/FeatureGeometryPropertiesDto"}},"required":["arcs","type","properties"]},"FeatureGeometryDto":{"type":"object","properties":{"type":{"type":"string","description":"Тип геометрии"},"geometries":{"type":"array","items":{"$ref":"#/components/schemas/GeometryPropertiesDto"}}},"required":["type","geometries"]},"GeometryCollectionDto":{"type":"object","properties":{"map":{"description":"Массив свойств объекта","type":"array","items":{"$ref":"#/components/schemas/FeatureGeometryDto"}}},"required":["map"]},"MapTopologyDto":{"type":"object","properties":{"type":{"type":"string","description":"тип"},"arcs":{"description":"массив с дугам","example":[[398223,46698]],"type":"array","items":{"type":"array"}},"transform":{"description":"объект преобразования","allOf":[{"$ref":"#/components/schemas/TransformDto"}]},"objects":{"description":"Коллекция с геометрией карты","allOf":[{"$ref":"#/components/schemas/GeometryCollectionDto"}]}},"required":["type","arcs","transform","objects"]},"MapDto":{"type":"object","properties":{"data":{"description":"данные карты","allOf":[{"$ref":"#/components/schemas/MapTopologyDto"}]}},"required":["data"]},"EthnicGroupMapWithGroupDto":{"type":"object","properties":{"longitude":{"type":"number","description":"географическая долгота","nullable":false},"latitude":{"type":"number","description":"географическая широта","nullable":false},"ethnicGroup":{"description":"объект с этнической группой","nullable":false,"allOf":[{"$ref":"#/components/schemas/EthnicGroupDto"}]}},"required":["longitude","latitude","ethnicGroup"]},"EthnicGroupMapPointEntity":{"type":"object","properties":{"id":{"type":"number","description":"","nullable":false},"ethnicGroupId":{"type":"number","description":"","nullable":false},"longitude":{"type":"number","description":"","nullable":false},"latitude":{"type":"number","description":"","nullable":false}},"required":["id","ethnicGroupId","longitude","latitude"]},"EthnicGroupMapPointEntityWithConstituents":{"type":"object","properties":{"id":{"type":"number","description":"","nullable":false},"ethnicGroupId":{"type":"number","description":"","nullable":false},"longitude":{"type":"number","description":"","nullable":false},"latitude":{"type":"number","description":"","nullable":false},"constituent":{"description":"объект региона","nullable":false,"allOf":[{"$ref":"#/components/schemas/ConstituentDto"}]}},"required":["id","ethnicGroupId","longitude","latitude","constituent"]},"EthnicGroupMapDto":{"type":"object","properties":{"longitude":{"type":"number","description":"географическая долгота","nullable":false},"latitude":{"type":"number","description":"географическая широта","nullable":false},"id":{"type":"number","description":"","nullable":false},"constituentId":{"type":"number","description":"","nullable":false}},"required":["longitude","latitude","id","constituentId"]},"ConstituentFilledDto":{"type":"object","properties":{"constituentId":{"type":"number","description":"","nullable":false},"ethnicGroupCount":{"type":"number","description":"","nullable":false},"filled":{"type":"number","description":"","nullable":false}},"required":["constituentId","ethnicGroupCount","filled"]},"AddStoryRequestEntity":{"type":"object","properties":{"id":{"type":"number","description":"","nullable":false},"storyName":{"type":"string","description":"название истории","nullable":false},"status":{"type":"string","description":"статус заявки","nullable":false},"comment":{"type":"string","description":"комментарий проверяющего","nullable":false},"userId":{"type":"number","description":"ид пользователя, создавшего заявку","nullable":false}},"required":["id","storyName","status","comment","userId"]},"AddStoryRequestDto":{"type":"object","properties":{"storyName":{"type":"string","description":"название истории","nullable":false},"id":{"type":"number","description":"порядковый номер заявки","nullable":false},"status":{"type":"string","description":"статус заявки","nullable":false,"enum":["SEND","SUCCESSED","CANCELLED"]},"comment":{"type":"string","description":"комментарий от проверяющего","nullable":false}},"required":["storyName","id","status","comment"]},"CreateAddStoryRequestDto":{"type":"object","properties":{"storyName":{"type":"string","description":"название истории","nullable":false}},"required":["storyName"]},"EditAddStoryRequestDto":{"type":"object","properties":{"status":{"type":"string","description":"статус заявки берется является ENUM","nullable":false,"enum":["SEND","SUCCESSED","CANCELLED"]},"comment":{"type":"string","description":"комментарий","nullable":false}},"required":["status","comment"]},"AddEthnicGroupMapDto":{"type":"object","properties":{"longitude":{"type":"number","description":"географическая долгота","nullable":false},"latitude":{"type":"number","description":"географическая широта","nullable":false}},"required":["longitude","latitude"]},"AddStoryDto":{"type":"object","properties":{"name":{"type":"string","description":"название истории","nullable":false},"ethnicGroupId":{"type":"number","description":"id этнической группы","nullable":false},"text":{"type":"string","description":"текст сказки","nullable":false}},"required":["name","ethnicGroupId","text"]},"StoryWithTextDto":{"type":"object","properties":{"name":{"type":"string","description":"название истории","nullable":false},"id":{"type":"number","description":"id сказки","nullable":false},"ethnicGroup":{"description":"id этнической группы","nullable":false,"allOf":[{"$ref":"#/components/schemas/EthnicGroupDto"}]},"text":{"type":"string","description":"текст сказки","nullable":false}},"required":["name","id","ethnicGroup","text"]},"EditStoryDto":{"type":"object","properties":{"name":{"type":"string","description":"название истории","nullable":false},"ethnicGroupId":{"type":"number","description":"id этнической группы","nullable":false},"text":{"type":"string","description":"текст сказки","nullable":false}},"required":["name","ethnicGroupId","text"]},"AddTextStoryDto":{"type":"object","properties":{"text":{"type":"string","description":"","nullable":false}},"required":["text"]},"AddAudioStoryDto":{"type":"object","properties":{"userAudioId":{"type":"number","description":"","nullable":false},"userId":{"type":"number","description":"","nullable":false},"moderateScore":{"type":"number","description":"оценка от проверяющего","nullable":false}},"required":["userAudioId","userId","moderateScore"]},"BaseUserAudioDto":{"type":"object","properties":{"name":{"type":"string","description":"","nullable":false},"languageId":{"type":"number","description":"","nullable":false}},"required":["name","languageId"]}}},"security":[{"JWT-Auth":[]}]}